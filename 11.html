<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Address book - iOS Application</title>
<link rel="stylesheet" href="./golo.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Address book - iOS Application</h1>
<div class="details">
<span id="revnumber">version 1.0</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_cloning_the_starter_project">Cloning the starter project</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_retrieve_and_display_the_contact_list">Retrieve and display the contact list</a>
<ul class="sectlevel2">
<li><a href="#_prepare_the_view_to_display_the_contacts">Prepare the view to display the contacts</a></li>
<li><a href="#_consume_the_common_library">Consume the common library</a></li>
<li><a href="#_run_the_application">Run the application</a></li>
</ul>
</li>
<li><a href="#_retrieve_and_display_the_contact_details">Retrieve and display the contact details</a>
<ul class="sectlevel2">
<li><a href="#_run_the_application_2">Run the application</a></li>
</ul>
</li>
<li><a href="#_whats_next">What&#8217;s next ?</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As said in the first chapter, we are not here to take a deep dive into the different targeted platform.
So, to stay focused on Kotlin multi-platform development, we will provide empty projects, ready to run for each platform.
Of course, those projects need to be modified.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloning_the_starter_project"><a class="anchor" href="#_cloning_the_starter_project"></a>Cloning the starter project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can find the <strong><em>iOS</em></strong> starter project on <a href="https://github.com/romainbsl/mpp-workshop-ios-starter">GitHub</a>.</p>
</div>
<div class="paragraph">
<p>Open a terminal and run the following <strong>Git</strong> command:</p>
</div>
<div class="listingblock">
<div class="title">Cloning the starter project</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell script" class="language-shell script hljs">git clone https://github.com/romainbsl/mpp-workshop-ios-starter.git</code></pre>
</div>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-1.png" alt="open Xcode project"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Now, open the project with <em>Xcode</em>, by clicking on <strong>Open another project&#8230;&#8203;</strong>, in the right panel.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Remember</em>, while we were building our Kotlin multi-platform library, we added a build step named <code>packForXcode</code>.
This task should have built and published the <code>framework</code> needed by <strong><em>Xcode</em></strong> to consume our library with <strong><em>iOS</em></strong> in a specific directory.</p>
</div>
<div class="paragraph">
<div class="title">Kotlin multi-platform library build directory.</div>
<p><span class="image"><img src="images/res/11-2.png" alt="build directory" width="400"></span></p>
</div>
<div class="paragraph">
<p>To be able to use the <code>framework</code> file into our <strong>Xcode</strong> project, we need to add it manually to the configuration.</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 65%;">
<col style="width: 35%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-3.png" alt="project settings"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Open your project settings, on the <strong>General</strong> tab. Then, in <strong>Framework, Libraries and Embedded Content</strong> click the <code>+</code> button</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-4.png" alt="add framework"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>We need to find our <code>framework</code>, so click on <strong>Add Other&#8230;&#8203;</strong>, then <strong>Add Files&#8230;&#8203;</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-5.png" alt="broswe files"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Browse to your <code>framework</code> and click <strong>Open</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-6.png" alt="add framework result"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>You now see your <code>framework</code>, added to the configuration</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Right now, if you try to build your application, it will fail. You also need to tell to <strong><em>Xcode</em></strong> where to look for the <code>framework</code>.</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open your project settings, on the <strong>Build Settings</strong> tab, with the filters <strong>All</strong> and <strong>Combined</strong> activated.</p>
<p class="tableblock">Then find the <strong>Search Paths</strong> section</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-7.png" alt="project build settings"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the directory that contains your built <code>framework</code> to <strong>Framework Search Paths</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-8.png" alt="add search path"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Now that we have configured our project we will be able to use our Kotlin multi-platform library directly in <em>Swift</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_retrieve_and_display_the_contact_list"><a class="anchor" href="#_retrieve_and_display_the_contact_list"></a>Retrieve and display the contact list</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For displaying a list of contacts, all our modifications will appear in the class <code>MasterViewController</code>. So, open it in <strong>Xcode</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">Reminder</div>
<p>In our Kotlin multi-platform library we have defined the iOS target to be built as a <code>framework</code> named <strong><em>AddressBookCommon</em></strong></p>
</div>
<div class="listingblock">
<div class="title">build.gradle.kts</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="kotlin" class="language-kotlin hljs">kotlin {
    iosX64("ios") {
        binaries {
            framework {
                baseName = "AddressBookCommon"
            }
        }
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First of all, add the import onto our common library.</p>
</div>
<div class="listingblock">
<div class="title">MasterViewController.swift</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">import UIKit
import AddressBookCommon <i class="conum" data-value="1"></i><b>(1)</b>

class MasterViewController: UITableViewController {
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import the common library</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_prepare_the_view_to_display_the_contacts"><a class="anchor" href="#_prepare_the_view_to_display_the_contacts"></a>Prepare the view to display the contacts</h3>
<div class="paragraph">
<p>Before using our shared business logic to display the contact list,
we will wrote some code to prepare the UI interactions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the flow interaction between the <em>Master</em> and <em>Detail</em> views</p>
<div class="paragraph">
<p>When the list of contacts will be displayed,
we would like to click on the items to be able to see the details information for each contact.
To do that, we will configure an existing <em>Segue</em>, <code>showDetail</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For those who are not familiar with <code>iOS</code>, a <em>Segue</em> represents a navigation flow between two screens
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">MasterViewController.swift</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">class MasterViewController: UITableViewController {
    private var contactList = [Contact]() <i class="conum" data-value="1"></i><b>(1)</b>
    // ...
    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        if segue.identifier == "showDetail" {
            if let indexPath = tableView.indexPathForSelectedRow {
                let contact = contactList[indexPath.row] <i class="conum" data-value="2"></i><b>(2)</b>
                let controller = (segue.destination as! UINavigationController).topViewController as! DetailViewController
                controller.contactId = contact.id <i class="conum" data-value="3"></i><b>(3)</b>
            }
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare a global variable, a list of contacts, that will be used to update our view.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Retrieve the contact in <code>contactList</code>, based on the index of the clicked element of the TableView.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The contact Id for which we want to show the details on the next screen.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure what and how the <em>TableView</em> is display</p>
<div class="paragraph">
<p>As our class is implementing <code>UITableViewController</code>, we need to implement <code>tableView(&#8230;&#8203;)</code> functions to configure its behavior.</p>
</div>
<div class="listingblock">
<div class="title">MasterViewController.swift</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">class MasterViewController: UITableViewController {
    // ...
    override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return contactList.count <i class="conum" data-value="1"></i><b>(1)</b>
    }
    override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell { <i class="conum" data-value="2"></i><b>(2)</b>
        let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)
        let contact = contactList[indexPath.row] <i class="conum" data-value="3"></i><b>(3)</b>
        cell.textLabel!.text = contact.fullName <i class="conum" data-value="4"></i><b>(4)</b>
        return cell
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create the <em>TableView</em> with the correct dimensions.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configure the cells for each element of the <em>TableView</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Get the contact from the shared variable <code>contactList</code>, based on the current cell index.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Set what to display for each element of the <em>TableView</em>.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_consume_the_common_library"><a class="anchor" href="#_consume_the_common_library"></a>Consume the common library</h3>
<div class="paragraph">
<p>As for the <strong><em>Android</em></strong> application, mainly, we have two steps that we need to fulfill to consume our shared library.
First, we should implement the contract defined for the view, then declare and bind the presenter to it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>ContactList.View</code> interface</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In our Kotlin multi-platform library we defined our interface as part of a class, giving us something like <code>ContactList.View</code>.
In Kotlin/Native, <code>ContactList.View</code> has been renamed <code>ContactListView</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Our first task is to implement the view, with some extras, to be able to display contacts in the existing <em>TableView</em>.</p>
</div>
<div class="listingblock">
<div class="title">MasterViewController.swift</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">class MasterViewController: UITableViewController, ContactListView { <i class="conum" data-value="1"></i><b>(1)</b>
    // ...
    func displayContactList(contactList: [Contact]) { <i class="conum" data-value="2"></i><b>(2)</b>
        self.contactList = contactList <i class="conum" data-value="3"></i><b>(3)</b>
        self.tableView.reloadData() <i class="conum" data-value="4"></i><b>(4)</b>
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement the interface <code>ContactListView</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implement the function <code>displayContactList</code>, defined by the interface.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Update the global variable with new data.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>reload the Table View to display new data.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Bind the <code>ContactListPresenter</code> to the view</p>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 31.8181%;">
<col style="width: 68.1819%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Firstly, we need to declare the presenter in our class.</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">private var presenter: ContactListPresenter!</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Initialize the presenter while the view is created, by calling our manual dependency injection object <code>CommonInjector</code>.</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">override func viewDidLoad() {
    super.viewDidLoad()
    presenter = CommonInjector.init().contactListPresenter()
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Attach <strong><em>(1)</em></strong> and detach <strong><em>(2)</em></strong> the view to the presenter when it is shown or concealed.</p>
<p class="tableblock"><em>In this case, attaching the view to the presenter also trigger the function call to get the contact list.</em></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    presenter.attachView(view: self) <i class="conum" data-value="1"></i><b>(1)</b>
}
override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    presenter.detachView() <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_run_the_application"><a class="anchor" href="#_run_the_application"></a>Run the application</h3>
<div class="paragraph">
<p>Now, you can run the application onto an <strong>iOS Simulator</strong> by clicking the button <span class="image"><img src="images/res/run-ios.png" alt="run" width="16"></span> in <strong>Xcode</strong>.</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-9.png" alt="contact list" width="300"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>Here are the contacts retrieved from our backend API</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As for <strong><em>Android</em></strong>, if you have clicked on an item from the list, you should see that nothing is shown, except static values.
This is our next part, showing the contact details.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_retrieve_and_display_the_contact_details"><a class="anchor" href="#_retrieve_and_display_the_contact_details"></a>Retrieve and display the contact details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While we were displaying the contact list, we also prepared the transition between the <em>Master</em> and <em>Detail</em> screens,
by giving to the <em>Detail</em> view the contact Id for which we need to display the contact details.</p>
</div>
<div class="paragraph">
<p>Like for the <em>Master</em> view we must implement a contract and bind to a presenter.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>ContactDetail.View</code> interface</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In our Kotlin multi-platform library we defined our interface as part of a class, giving us something like <code>ContactDetail.View</code>.
In Kotlin/Native, <code>ContactDetail.View</code> has been renamed <code>ContactDetailView</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">DetailViewController.swift</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">class DetailViewController: UIViewController, ContactDetailView { <i class="conum" data-value="1"></i><b>(1)</b>
    // ...
    <i class="conum" data-value="2"></i><b>(2)</b>
    @IBOutlet weak var nameLabel: UILabel!
    @IBOutlet weak var phonesLabel: UILabel!
    @IBOutlet weak var addressesLabel: UILabel!
    // ...
    func displayContact(contact: Contact) { <i class="conum" data-value="3"></i><b>(3)</b>
        nameLabel.text = contact.fullName <i class="conum" data-value="4"></i><b>(4)</b>

        for (index,phone) in contact.phones.enumerated() { <i class="conum" data-value="5"></i><b>(5)</b>
            phonesLabel.text! += phone.type.displayedName + ": "
                                + phone.number

            if index &lt; contact.phones.count-1 { phonesLabel.text! += "\n" }
        }

        for (index, address) in contact.addresses.enumerated() { <i class="conum" data-value="6"></i><b>(6)</b>
            addressesLabel.text! += address.type.displayedName + ":\n "
                            + address.street + "\n"
                            + address.postalCode + " " + address.city + "\n"
                            + address.country

            if index &lt; contact.addresses.count - 1 {
                addressesLabel.text! += "\n------------------------------\n"
            }
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement the interface <code>ContactDetailView</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Screen objects that will be used to display the contact details</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Implement the function <code>displayContact</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Display the contact name</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Display the contact phones</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Display the contact addresses</td>
</tr>
</table>
</div>
</li>
<li>
<p>Bind the <code>ContactDetailPresenter</code> to the view</p>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 31.8181%;">
<col style="width: 68.1819%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Firstly, we need to declare the presenter in our class.</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">private var presenter: ContactDetailPresenter!</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Initialize the presenter while the view is created, by calling our manual dependency injection object <code>CommonInjector</code>.</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">override func viewDidLoad() {
    super.viewDidLoad()
    presenter = CommonInjector.init().contactDetailPresenter()
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"></td>
<td class="tableblock halign-left valign-middle"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle"><p class="tableblock">Attach <strong><em>(1)</em></strong> and detach <strong><em>(3)</em></strong> the view to the presenter when it is shown or concealed.</p>
<p class="tableblock">In this case, attaching the view to the presenter doesn&#8217;t trigger anything.
We must call the presenter ourselves to retrieve the contact details, giving a contact Id <strong><em>(2)</em></strong>.</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="swift" class="language-swift hljs">override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    presenter.attachView(view: self) <i class="conum" data-value="1"></i><b>(1)</b>
    presenter.getContact(contactId: contactId!) <i class="conum" data-value="2"></i><b>(2)</b>
}
override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    presenter.detachView() <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_run_the_application_2"><a class="anchor" href="#_run_the_application_2"></a>Run the application</h3>
<div class="paragraph">
<p>Now, you can run the application onto an <strong>iOS Simulator</strong> by clicking the button <span class="image"><img src="images/res/run-ios.png" alt="run" width="16"></span> in <strong>Xcode</strong>.</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="images/res/11-9.png" alt="contact list" width="300"></span></p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><img src="images/res/11-10.png" alt="contact details" width="300"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next"><a class="anchor" href="#_whats_next"></a>What&#8217;s next ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the next chapter, we will see how to use our Kotlin multi-platform library on a Web application!</p>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="highlightjs/styles/idea.min.css">
<script src="highlightjs/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>